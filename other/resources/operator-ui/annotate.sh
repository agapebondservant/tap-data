#!/usr/bin/env sh

kubectl annotate --overwrite crd postgres.sql.tanzu.vmware.com   sql.tanzu.vmware.com/ui='{"form":{"sections":[{"name":"Instance Resources","properties":[{"jsonPath":"spec.storageSize","displayName":"Storage Size","kind":"Quantity","options":{"magnitude":"G","unit":"B"}},{"jsonPath":"spec.cpu","displayName":"CPU","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.memory","displayName":"Memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]},{"name":"Kubernetes Configuration","properties":[{"jsonPath":"spec.storageClassName","displayName":"Storage Class Name","kind":"Text"},{"jsonPath":"spec.serviceType","displayName":"Service Type","kind":"Enum"},{"jsonPath":"spec.seccompProfile.type","displayName":"Seccomp Profile Type","kind":"Text"}]},{"name":"Data Service Configuration","properties":[{"jsonPath":"spec.pgConfig.dbname","displayName":"Database Name","kind":"Text"},{"jsonPath":"spec.pgConfig.username","displayName":"Admin Username","kind":"Text"},{"jsonPath":"spec.pgConfig.appUser","displayName":"App Username","kind":"Text"},{"jsonPath":"spec.postgresVersion.name","displayName":"Postgres Version","kind":"Text"},{"jsonPath":"spec.highAvailability.enabled","displayName":"High Availability","kind":"Boolean"},{"jsonPath":"spec.logLevel","displayName":"Log Level","kind":"Enum"}]}]},"table":{"columns":[{"name":"Status","kind":"PrinterColumn","jsonPath":"status.currentState","type":"string"},{"name":"DB Version","kind":"PrinterColumn","jsonPath":"status.dbVersion","type":"string"},{"name":"High Availability","kind":"PrinterColumn","jsonPath":"spec.highAvailability.enabled","type":"boolean"},{"name":"Disk Utilization","kind":"DiskUsage","dataServicePodSelector":"app=postgres","instanceNamePodLabel":"postgres-instance"}]}}'

kubectl annotate --overwrite crd mysqls.with.sql.tanzu.vmware.com   sql.tanzu.vmware.com/ui='{"form":{"sections":[{"name":"Instance Resources","properties":[{"jsonPath":"spec.storageSize","displayName":"Storage Size","kind":"Quantity","options":{"magnitude":"G","unit":"B"}},{"kind":"Grid","layout":{"columns":["CPU","Memory"],"rows":[{"name":"MySQL","properties":[{"jsonPath":"spec.resources.mysql.limits.cpu","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.resources.mysql.limits.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]},{"name":"MySQL Sidecar","properties":[{"jsonPath":"spec.resources.mysqlSidecar.limits.cpu","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.resources.mysqlSidecar.limits.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]},{"name":"Metrics","properties":[{"jsonPath":"spec.resources.metrics.limits.cpu","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.resources.metrics.limits.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]},{"name":"Proxy","properties":[{"jsonPath":"spec.resources.proxy.limits.cpu","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.resources.proxy.limits.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]}]}}]},{"name":"Kubernetes Configuration","properties":[{"jsonPath":"spec.storageClassName","displayName":"Storage Class Name","kind":"Text"},{"jsonPath":"spec.serviceType","displayName":"Service Type","kind":"Enum"}]},{"name":"Data Service Configuration","properties":[{"jsonPath":"spec.mysqlVersion.name","displayName":"MySQL Version","kind":"Text"},{"jsonPath":"spec.highAvailability.enabled","displayName":"High Availability","kind":"Boolean"}]}]},"table":{"columns":[{"name":"Status","kind":"PrinterColumn","jsonPath":"status.phase","type":"string"},{"name":"Tanzu Version","kind":"PrinterColumn","jsonPath":"metadata.labels['\''app.kubernetes.io/version'\'']","type":"string"},{"name":"DB Version","kind":"PrinterColumn","jsonPath":"status.dbVersion","type":"string"},{"name":"Update Status","kind":"PrinterColumn","jsonPath":"status.conditions[?(@.type==\"ReconcilePaused\")].reason","type":"string"},{"name":"High Availability","kind":"PrinterColumn","jsonPath":"spec.highAvailability.enabled","type":"boolean"},{"name":"Disk Utilization","kind":"DiskUsage","dataServicePodSelector":"app.kubernetes.io/name=mysql","instanceNamePodLabel":"app.kubernetes.io/instance"}]}}'

kubectl annotate --overwrite crd rabbitmqclusters.rabbitmq.com   sql.tanzu.vmware.com/ui='{"form":{"sections":[{"name":"Instance Resources","properties":[{"jsonPath":"spec.persistence.storage","displayName":"Storage Size","kind":"Quantity","options":{"magnitude":"G","unit":"B"}},{"kind":"Grid","layout":{"columns":["Requests","Limits"],"rows":[{"name":"CPU","properties":[{"jsonPath":"spec.resources.requests.cpu","kind":"Quantity","options":{"unit":"cores"}},{"jsonPath":"spec.resources.limits.cpu","kind":"Quantity","options":{"unit":"cores"}}]},{"name":"Memory","properties":[{"jsonPath":"spec.resources.requests.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}},{"jsonPath":"spec.resources.limits.memory","kind":"Quantity","options":{"magnitude":"Gi","unit":"B"}}]}]}}]},{"name":"Kubernetes Configuration","properties":[{"jsonPath":"spec.persistence.storageClassName","displayName":"Storage Class Name","kind":"Text"},{"jsonPath":"spec.service.type","displayName":"Service Type","kind":"Enum"},{"jsonPath":"spec.image","displayName":"Image","kind":"Text"},{"jsonPath":"spec.imagePullSecrets[0].name","displayName":"Image Pull Secret","kind":"Text"}]},{"name":"Data Service Configuration","properties":[{"jsonPath":"spec.skipPostDeploySteps","displayName":"Skip Post Deploy","kind":"Boolean"}]}]},"table":{"columns":[{"name":"All Replicas Ready","kind":"PrinterColumn","jsonPath":"status.conditions[?(@.type == '\''AllReplicasReady'\'')].status","type":"string"},{"name":"Reconcile Success","kind":"PrinterColumn","jsonPath":"status.conditions[?(@.type == '\''ReconcileSuccess'\'')].status","type":"string"},{"name":"Replicas","kind":"PrinterColumn","jsonPath":"spec.replicas","type":"number"},{"name":"Image","kind":"PrinterColumn","jsonPath":"spec.image","type":"string"},{"name":"Disk Utilization","kind":"DiskUsage","dataServicePodSelector":"app.kubernetes.io/component=rabbitmq","instanceNamePodLabel":"app.kubernetes.io/name"}]}}'
